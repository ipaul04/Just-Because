{"ast":null,"code":"import _objectSpread from\"/Users/irenepaul/Just Because/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{motion}from'framer-motion';import BackgroundSlideshow from'./BackgroundSlideshow';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const surveyQuestions=[{id:'feeling',question:'How are you feeling today?',type:'radio',options:[{value:'Happy',label:'Happy'},{value:'Inspired',label:'Inspired'},{value:'Neutral',label:'Neutral'},{value:'Tired',label:'Tired'},{value:'Anxious',label:'Anxious'}]},{id:'smile',question:'What\\'s one thing that made you smile?',type:'radio',options:[{value:'A good joke',label:'A good joke'},{value:'Time with loved ones',label:'Time with loved ones'},{value:'Achieving a goal',label:'Achieving a goal'},{value:'Nature\\'s beauty',label:'Nature\\'s beauty'},{value:'Something unexpected',label:'Something unexpected'}]},{id:'message',question:'Anything you\\'d like to share?',type:'text'}];const slideshowImages=['/slideshow/image1.png',// Placeholder - User should replace with actual images in public/slideshow\n'/slideshow/image2.png',// Placeholder\n'/slideshow/image3.png'// Placeholder\n];export default function SurveyPage(_ref){let{handleSurveySubmit,surveyData,setPage}=_ref;const[currentQuestionIndex,setCurrentQuestionIndex]=useState(0);const[responses,setResponses]=useState({});const[notification,setNotification]=useState('');const currentQuestion=surveyQuestions[currentQuestionIndex];const isLastQuestion=currentQuestionIndex===surveyQuestions.length-1;const handleAnswerChange=e=>{setResponses(_objectSpread(_objectSpread({},responses),{},{[e.target.name]:e.target.value}));};const handleNext=()=>{if(currentQuestionIndex<surveyQuestions.length-1){setCurrentQuestionIndex(currentQuestionIndex+1);}};const handlePrevious=()=>{if(currentQuestionIndex>0){setCurrentQuestionIndex(currentQuestionIndex-1);}};const handleSubmit=async e=>{e.preventDefault();try{await saveSurveyResponseToDatabase(responses);handleSurveySubmit(e,setNotification);setPage('home');// Navigate to home page after survey submission\n}catch(error){console.error('Failed to submit survey:',error);setNotification('Failed to submit survey. Please try again.');}};const saveSurveyResponseToDatabase=async data=>{const response=await fetch('http://localhost:5000/api/survey',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}return await response.json();};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0.5},className:\"relative flex flex-col items-center justify-center min-h-screen p-8\",children:[/*#__PURE__*/_jsx(BackgroundSlideshow,{images:slideshowImages}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 bg-white shadow-lg rounded-2xl p-8 w-full max-w-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-6 text-center text-gray-800\",children:\"Quick Survey\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex flex-col space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-semibold mb-4\",children:currentQuestion.question}),currentQuestion.type==='radio'&&currentQuestion.options&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-4\",children:currentQuestion.options.map(option=>/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:currentQuestion.id,value:option.value,checked:responses[currentQuestion.id]===option.value,onChange:handleAnswerChange,className:\"form-radio text-blue-600\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:option.label})]},option.value))}),currentQuestion.type==='text'&&/*#__PURE__*/_jsx(\"textarea\",{name:currentQuestion.id,value:responses[currentQuestion.id]||'',onChange:handleAnswerChange,className:\"mt-2 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\",rows:4,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handlePrevious,disabled:currentQuestionIndex===0,className:\"px-6 py-2 bg-gray-300 text-gray-800 rounded-lg shadow-md hover:bg-gray-400 disabled:opacity-50\",children:\"Previous\"}),isLastQuestion?/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-6 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700\",children:\"Submit Survey\"}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleNext,className:\"px-6 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700\",children:\"Next\"})]})]}),notification&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-green-100 text-green-700 rounded-lg text-center\",children:notification})]})]});}","map":{"version":3,"names":["React","useState","motion","BackgroundSlideshow","jsx","_jsx","jsxs","_jsxs","surveyQuestions","id","question","type","options","value","label","slideshowImages","SurveyPage","_ref","handleSurveySubmit","surveyData","setPage","currentQuestionIndex","setCurrentQuestionIndex","responses","setResponses","notification","setNotification","currentQuestion","isLastQuestion","length","handleAnswerChange","e","_objectSpread","target","name","handleNext","handlePrevious","handleSubmit","preventDefault","saveSurveyResponseToDatabase","error","console","data","response","fetch","method","headers","body","JSON","stringify","ok","Error","concat","status","json","div","initial","opacity","animate","transition","duration","className","children","images","onSubmit","map","option","checked","onChange","required","rows","onClick","disabled"],"sources":["/Users/irenepaul/Just Because/src/SurveyPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport BackgroundSlideshow from './BackgroundSlideshow';\n\ninterface SurveyEntry {\n  id: number;\n  feeling: string;\n  smile: string;\n  message?: string;\n}\n\ninterface SurveyPageProps {\n  handleSurveySubmit: (e: React.FormEvent<HTMLFormElement>, setNotification: (message: string) => void) => void;\n  surveyData: SurveyEntry[];\n  setPage: (pageName: string) => void;\n}\n\ninterface Question {\n  id: string;\n  question: string;\n  type: 'radio' | 'text';\n  options?: { value: string; label: string }[];\n}\n\nconst surveyQuestions: Question[] = [\n  {\n    id: 'feeling',\n    question: 'How are you feeling today?',\n    type: 'radio',\n    options: [\n      { value: 'Happy', label: 'Happy' },\n      { value: 'Inspired', label: 'Inspired' },\n      { value: 'Neutral', label: 'Neutral' },\n      { value: 'Tired', label: 'Tired' },\n      { value: 'Anxious', label: 'Anxious' },\n    ],\n  },\n  {\n    id: 'smile',\n    question: 'What\\'s one thing that made you smile?',\n    type: 'radio',\n    options: [\n      { value: 'A good joke', label: 'A good joke' },\n      { value: 'Time with loved ones', label: 'Time with loved ones' },\n      { value: 'Achieving a goal', label: 'Achieving a goal' },\n      { value: 'Nature\\'s beauty', label: 'Nature\\'s beauty' },\n      { value: 'Something unexpected', label: 'Something unexpected' },\n    ],\n  },\n  {\n    id: 'message',\n    question: 'Anything you\\'d like to share?',\n    type: 'text',\n  },\n];\n\nconst slideshowImages = [\n  '/slideshow/image1.png', // Placeholder - User should replace with actual images in public/slideshow\n  '/slideshow/image2.png', // Placeholder\n  '/slideshow/image3.png', // Placeholder\n];\n\nexport default function SurveyPage({ handleSurveySubmit, surveyData, setPage }: SurveyPageProps) {\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [responses, setResponses] = useState<Record<string, string>>({});\n  const [notification, setNotification] = useState('');\n\n  const currentQuestion = surveyQuestions[currentQuestionIndex];\n  const isLastQuestion = currentQuestionIndex === surveyQuestions.length - 1;\n\n  const handleAnswerChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setResponses({ ...responses, [e.target.name]: e.target.value });\n  };\n\n  const handleNext = () => {\n    if (currentQuestionIndex < surveyQuestions.length - 1) {\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(currentQuestionIndex - 1);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    try {\n      await saveSurveyResponseToDatabase(responses);\n      handleSurveySubmit(e, setNotification);\n      setPage('home'); // Navigate to home page after survey submission\n    } catch (error) {\n      console.error('Failed to submit survey:', error);\n      setNotification('Failed to submit survey. Please try again.');\n    }\n  };\n\n  const saveSurveyResponseToDatabase = async (data: Record<string, string>) => {\n    const response = await fetch('http://localhost:5000/api/survey', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    return await response.json();\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.5 }}\n      className=\"relative flex flex-col items-center justify-center min-h-screen p-8\"\n    >\n      <BackgroundSlideshow images={slideshowImages} />\n      <div className=\"relative z-10 bg-white shadow-lg rounded-2xl p-8 w-full max-w-lg\">\n        <h2 className=\"text-3xl font-bold mb-6 text-center text-gray-800\">Quick Survey</h2>\n        <form onSubmit={handleSubmit} className=\"flex flex-col space-y-4\">\n          <div className=\"mb-4\">\n            <p className=\"text-xl font-semibold mb-4\">{currentQuestion.question}</p>\n            {currentQuestion.type === 'radio' && currentQuestion.options && (\n              <div className=\"flex flex-wrap gap-4\">\n                {currentQuestion.options.map((option) => (\n                  <label key={option.value} className=\"inline-flex items-center\">\n                    <input\n                      type=\"radio\"\n                      name={currentQuestion.id}\n                      value={option.value}\n                      checked={responses[currentQuestion.id] === option.value}\n                      onChange={handleAnswerChange}\n                      className=\"form-radio text-blue-600\"\n                      required\n                    />\n                    <span className=\"ml-2\">{option.label}</span>\n                  </label>\n                ))}\n              </div>\n            )}\n            {currentQuestion.type === 'text' && (\n              <textarea\n                name={currentQuestion.id}\n                value={responses[currentQuestion.id] || ''}\n                onChange={handleAnswerChange}\n                className=\"mt-2 block w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\n                rows={4}\n                required\n              ></textarea>\n            )}\n          </div>\n\n          <div className=\"flex justify-between mt-6\">\n            <button\n              type=\"button\"\n              onClick={handlePrevious}\n              disabled={currentQuestionIndex === 0}\n              className=\"px-6 py-2 bg-gray-300 text-gray-800 rounded-lg shadow-md hover:bg-gray-400 disabled:opacity-50\"\n            >\n              Previous\n            </button>\n            {isLastQuestion ? (\n              <button\n                type=\"submit\"\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700\"\n              >\n                Submit Survey\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                onClick={handleNext}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700\"\n              >\n                Next\n              </button>\n            )}\n          </div>\n        </form>\n        {notification && (\n          <div className=\"mt-4 p-3 bg-green-100 text-green-700 rounded-lg text-center\">\n            {notification}\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}